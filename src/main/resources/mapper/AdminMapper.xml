<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.joo.abysshop.mapper.mybatis.AdminMapper">
  <select id="findAllOrders" resultType="java.util.List">
    SELECT *
    FROM orders_table
  </select>

  <update id="changeOrderState" parameterType="java.util.Map">
    UPDATE orders_table
    SET order_state = #{newState}
    WHERE order_id = #{orderId}
  </update>

  <update id="providePoint">
    UPDATE users_table
    SET points = points + #{point}
    WHERE user_id = #{userId}
  </update>

  <insert id="insertProduct" parameterType="com.joo.abysshop.entity.admin.AddProductEntity">
    INSERT INTO products_table (product_name, price, description)
    VALUES (#{productName}, #{price}, #{description})
  </insert>

  <insert id="insertProductImage" parameterType="com.joo.abysshop.entity.product.ProductImageEntity">
    INSERT INTO product_image_table (product_id, image, original_file_name)
    VALUES (#{productId}, #{image}, #{originalFileName})
  </insert>

  <delete id="deleteByProductId" parameterType="java.lang.Long">
    DELETE
    FROM products_table
    WHERE product_id = #{productId}
  </delete>
</mapper>